# Mermaid 流程图

本目录存放项目的 Mermaid 流程图，用于可视化展示项目架构和流程。

## 图表列表

| 文件名 | 描述 | 图表数量 |
|--------|------|----------|
| `01-project-overview.md` | 项目概览 - 技术栈和整体架构 | 7 个图表 |
| `02-login-flow.md` | 登录流程详解 | 7 个图表 |
| `03-permission-flow.md` | 权限验证流程详解 | 9 个图表 |
| `04-request-lifecycle.md` | 请求生命周期详解 | 10 个图表 |
| `05-data-flow.md` | 数据流转流程详解 | 12 个图表 |
| `06-code-generation.md` | 代码生成流程详解 | 9 个图表 |
| `07-file-upload.md` | 文件上传下载流程详解 | 10 个图表 |
| `08-scheduled-tasks.md` | 定时任务流程详解 | 11 个图表 |
| `09-tree-structure.md` | 树形结构构建流程详解 | 11 个图表 |
| `10-cache-usage.md` | 缓存使用流程详解 | 12 个图表 |
| `11-dict-management.md` | 字典管理流程详解 | 8 个图表 |
| `12-data-import-export.md` | 数据导入导出流程详解 | 9 个图表 |
| `13-operation-log.md` | 操作日志与登录日志流程详解 | 9 个图表 |
| `14-user-online.md` | 在线用户管理流程详解 | 7 个图表 |
| `15-system-config.md` | 系统参数配置流程详解 | 7 个图表 |
| `16-exception-handling.md` | 全局异常处理流程详解 | 7 个图表 |
| `17-database-pool.md` | 数据库连接池与事务管理详解 | 7 个图表 |
| `18-rate-limiting.md` | 接口限流与防护流程详解（建议方案）| 8 个图表 |

**总计：147 个 Mermaid 流程图**

## 各图表包含内容

### 01. 项目概览
1. 项目整体架构图
2. 后端分层架构图
3. 核心技术栈思维导图
4. 核心功能模块关系图
5. 认证授权流程时序图
6. 数据库关系 ER 图
7. 部署架构图

### 02. 登录流程
1. 登录完整流程时序图
2. 验证码生成与验证流程
3. 密码错误与账号锁定流程
4. 登录流程状态流转图
5. Token 刷新机制
6. 登录安全措施
7. 登录相关数据结构

### 03. 权限验证流程
1. 权限验证完整流程时序图
2. RBAC 权限模型图
3. 权限验证的三个层次
4. 数据权限过滤流程
5. 权限加载与缓存流程
6. AOP 权限切面实现
7. 数据权限 SQL 生成
8. 权限配置示例
9. 权限验证数据流

### 04. 请求生命周期
1. 完整请求生命周期时序图
2. FastAPI 中间件执行顺序
3. 异常处理流程
4. AOP 切面执行流程
5. 链路追踪流程
6. 请求状态流转图
7. 并发请求处理
8. 响应构建流程
9. 请求生命周期时间轴
10. 关键时间节点说明

### 05. 数据流转流程
1. 完整数据流转图
2. 查询数据流转时序图
3. 创建数据流转时序图
4. 更新数据流转图
5. 删除数据流转图
6. 缓存数据流转时序图
7. 数据格式转换
8. 数据脱敏流程
9. 分页数据流转
10. 数据验证链
11. 事务处理流程
12. 数据流转关键节点

### 06. 代码生成流程
1. 代码生成完整流程时序图
2. 表结构导入流程
3. 代码模板渲染流程
4. 字段配置映射
5. 前后端代码生成结构
6. 生成配置选项
7. 代码生成后的文件操作
8. 树表特殊处理
9. 代码生成优化建议

### 07. 文件上传下载流程
1. 文件上传完整流程时序图
2. 文件下载流程时序图
3. 图片上传与预览流程
4. 文件存储策略
5. 文件安全检查
6. 分片上传流程
7. 文件权限控制
8. 文件记录数据库设计
9. 常见文件类型处理
10. 文件清理策略

### 08. 定时任务流程
1. 定时任务完整流程时序图
2. Cron 表达式解析
3. 定时任务状态流转
4. 任务执行流程
5. 任务调度器架构
6. 常用 Cron 表达式示例
7. 任务失败重试策略
8. 任务并发控制
9. 任务监控告警
10. 任务管理功能
11. 系统内置定时任务

### 09. 树形结构构建流程
1. 部门树构建完整流程时序图
2. 树形结构数据转换
3. 递归构建算法
4. 树节点操作
5. 部门树数据库查询
6. 树形结构缓存策略
7. 树节点权限过滤
8. 树形结构展开与折叠
9. 树节点拖拽排序
10. 前端树组件渲染
11. 树形结构性能优化

### 10. 缓存使用流程
1. 缓存读写完整流程时序图
2. 缓存策略模式
3. 多级缓存架构
4. 缓存穿透防护
5. 缓存雪崩防护
6. 缓存击穿防护
7. 缓存更新策略
8. 缓存预热
9. 项目缓存使用场景
10. 缓存 Key 设计规范
11. 缓存监控与告警
12. 分布式锁实现

### 11. 字典管理流程
1. 字典数据加载完整流程时序图
2. 字典缓存读写流程
3. 字典类型与数据关系 ER 图
4. 前端字典组件渲染流程
5. 字典数据更新同步机制
6. 字典在表单验证中的使用
7. 字典缓存预热与重建
8. 字典管理数据流转状态图

### 12. 数据导入导出流程
1. Excel 导入完整流程时序图
2. Excel 导出完整流程时序图
3. 数据模板生成流程
4. 导入数据验证链
5. 大数据量分批导出策略
6. 导入错误处理与回滚
7. 字段映射与枚举转换
8. Excel 文件存储策略
9. Excel 工具类使用示例

### 13. 操作日志与登录日志流程
1. 日志收集完整流程时序图
2. AOP 日志切面拦截机制
3. 日志数据提取与解析
4. 敏感信息脱敏流程
5. 日志存储策略（分表/归档）
6. 日志查询与导出流程
7. 登录日志审计分析
8. 日志性能优化策略
9. 日志类型对比

### 14. 在线用户管理流程
1. 在线用户会话管理完整流程
2. 会话创建与存储流程
3. 强制退出用户流程
4. 会话超时与续期机制
5. 并发登录控制（单点登录）
6. 在线用户列表查询流程
7. JWT Payload 结构

### 15. 系统参数配置流程
1. 参数配置读写完整流程
2. 参数缓存加载与更新
3. 参数热更新机制
4. 参数验证与默认值处理
5. 内置参数保护机制
6. 前端动态配置加载
7. 系统参数配置分类

### 16. 全局异常处理流程
1. 全局异常捕获机制流程
2. 异常分类与处理策略
3. 自定义业务异常处理
4. 异常日志记录流程
5. 前端错误提示渲染
6. 异常响应状态流转图
7. 异常处理器注册流程

### 17. 数据库连接池与事务管理
1. 连接池工作原理流程图
2. 连接获取与释放流程
3. 事务边界与传播
4. 自动提交与回滚机制
5. 慢查询监控流程
6. 连接池配置优化建议
7. 异步会话管理

### 18. 接口限流与防护流程
1. 限流策略实现流程（建议方案）
2. IP 限流与用户限流
3. 滑动窗口算法实现
4. 接口防刷与验证码
5. 黑白名单机制
6. 限流告警与降级
7. 分布式限流实现
8. 关键配置说明

## 如何使用

### 方法 1：VS Code 预览（推荐）

1. 安装插件：
   - **Markdown Preview Mermaid Support** (推荐)
   - 或 **Mermaid Preview**

2. 打开任意 `.md` 文件

3. 按 `Ctrl+K V` 打开侧边预览

### 方法 2：在线渲染

访问 https://mermaid.live/ ，复制 Mermaid 代码即可预览和导出

### 方法 3：GitHub 直接查看

如果代码推送到 GitHub，直接在 GitHub 上查看会自动渲染 Mermaid 图表

## 学习建议

建议按照以下顺序阅读：

### 第一阶段：理解整体架构（必读）
1. **先看** `01-project-overview.md` - 了解整体架构和技术栈
2. **再看** `02-login-flow.md` - 理解用户如何进入系统
3. **然后** `03-permission-flow.md` - 理解如何控制访问
4. **接着** `04-request-lifecycle.md` - 理解请求如何处理
5. **最后** `05-data-flow.md` - 理解数据如何流转

### 第二阶段：深入核心功能
6. `10-cache-usage.md` - 理解缓存机制（性能优化的关键）
7. `09-tree-structure.md` - 理解树形结构（部门、菜单等）
8. `08-scheduled-tasks.md` - 理解定时任务（后台任务处理）

### 第三阶段：实用功能
9. `06-code-generation.md` - 学习如何使用代码生成器
10. `07-file-upload.md` - 理解文件上传下载机制
11. `12-data-import-export.md` - 学习数据导入导出机制

### 第四阶段：系统管理与监控
12. `11-dict-management.md` - 理解字典管理机制
13. `15-system-config.md` - 学习系统参数配置
14. `14-user-online.md` - 理解在线用户管理
15. `13-operation-log.md` - 学习日志审计机制

### 第五阶段：高级特性（建议）
16. `16-exception-handling.md` - 理解全局异常处理
17. `17-database-pool.md` - 学习数据库连接池管理
18. `18-rate-limiting.md` - 了解接口限流防护方案

## 图表说明

- **时序图 (Sequence)**：展示对象之间的交互顺序
- **流程图 (Flowchart)**：展示流程的分支和判断
- **状态图 (State Diagram)**：展示状态的变化
- **类图 (Class Diagram)**：展示类之间的关系
- **ER 图 (Entity Relationship)**：展示数据库表关系
- **甘特图 (Gantt)**：展示时间轴
- **思维导图 (Mindmap)**：展示层级结构
