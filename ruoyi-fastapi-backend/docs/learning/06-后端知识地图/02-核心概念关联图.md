# 核心概念关联图

## 核心概念关系网络

```mermaid
graph TB
    subgraph 基础概念层[基础概念层]
        HTTP[HTTP协议]
        Async[异步编程]
        Type[类型系统]
        Py[Python基础]
    end
    subgraph 数据处理层[数据处理层]
        ORM[ORM框架]
        Model[数据模型<br/>DO/VO/Query]
        Validate[参数验证]
        DB[(数据库)]
    end
    subgraph 接口设计层[接口设计层]
        Route[路由设计]
        Controller[控制器]
        Service[服务层]
        DAO[数据访问层]
    end
    subgraph 质量属性层[质量属性层]
        Security[安全性]
        Performance[性能]
        Maintain[可维护性]
    end
    subgraph 工程实践层[工程实践层]
        Test[测试]
        Deploy[部署]
        Monitor[监控]
    end

    Py --> ORM
    Type --> Model
    Type --> Validate
    HTTP --> Route
    Model --> ORM
    ORM --> DB
    Validate --> Model
    Route --> Controller
    Validate --> Controller
    Controller --> Service
    Service --> DAO
    DAO --> ORM
    Async --> Service
    Async --> DAO
    Route --> Security
    Controller --> Security
    Service --> Performance
    DAO --> Performance
    Controller --> Maintain
    Service --> Maintain
    Model --> Maintain
    Controller --> Test
    Service --> Test
    Deploy --> Monitor
    Maintain --> Test
```

## 概念依赖路径

```mermaid
graph LR
    subgraph 路径1[数据路径]
        A1[请求参数] --> A2[Query Model]
        A2 --> A3[Pydantic验证]
        A3 --> A4[DO转换]
        A4 --> A5[ORM操作]
        A5 --> A6[数据库]
    end
    subgraph 路径2[业务路径]
        B1[HTTP请求] --> B2[路由匹配]
        B2 --> B3[Controller]
        B3 --> B4[依赖注入]
        B4 --> B5[Service层]
        B5 --> B6[业务逻辑]
    end
    subgraph 路径3[响应路径]
        C1[业务结果] --> C2[VO转换]
        C2 --> C3[JSON序列化]
        C3 --> C4[HTTP响应]
    end
    路径2 --> 路径1
    路径1 --> 路径3
```

## 分层架构关系

```mermaid
graph TB
    subgraph 表现层[表现层 Presentation Layer]
        Client[客户端]
        HTTP[HTTP协议]
    end
    subgraph 接口层[接口层 API Layer]
        Route[路由]
        Controller[控制器]
        DTO[数据传输对象]
    end
    subgraph 业务层[业务层 Business Layer]
        Service[服务]
        Domain[领域模型]
        Business[业务逻辑]
    end
    subgraph 数据层[数据层 Data Layer]
        DAO[数据访问]
        ORM[ORM映射]
        Entity[实体]
        Database[(数据库)]
    end
    subgraph 横切关注点[横切关注点 Cross-Cutting Concerns]
        Auth[认证授权]
        Log[日志记录]
        Cache[缓存]
        Validate[参数验证]
    end

    Client -->|HTTP请求| HTTP
    HTTP --> Route
    Route --> Controller
    Controller -->|DTO| Service
    Service --> Business
    Service --> DAO
    DAO --> ORM
    ORM --> Entity
    Entity --> Database
    Auth -.->|拦截| Controller
    Validate -.->|前置| Controller
    Log -.->|环绕| Service
    Cache -.->|增强| DAO
```

## 技术栈关系图

```mermaid
graph TB
    subgraph Web框架[Web框架]
        FastAPI[FastAPI]
        Uvicorn[Uvicorn]
    end
    subgraph 数据相关[数据相关]
        SQLAlchemy[SQLAlchemy]
        Pydantic[Pydantic]
        Alembic[Alembic]
    end
    subgraph 数据库[数据库]
        MySQL[(MySQL)]
        PostgreSQL[(PostgreSQL)]
        Redis[(Redis)]
    end
    subgraph 工具库[工具库]
        JWT[PyJWT]
        Passlib[Passlib]
        Asyncio[Asyncio]
    end

    FastAPI --> Uvicorn
    FastAPI --> Pydantic
    FastAPI --> SQLAlchemy
    FastAPI --> Asyncio
    SQLAlchemy --> MySQL
    SQLAlchemy --> PostgreSQL
    SQLAlchemy --> Alembic
    FastAPI --> Redis
    FastAPI --> JWT
    FastAPI --> Passlib
```

## 概念说明

### 基础概念层

| 概念 | 说明 | 关联内容 |
|-----|------|---------|
| HTTP协议 | 后端通信的基础 | 路由设计、响应设计 |
| 异步编程 | 提高并发处理能力 | 服务层、数据访问层 |
| 类型系统 | 提供类型安全和数据验证 | 数据模型、参数验证 |
| Python基础 | 编程语言基础 | 所有技术的基础 |

### 数据处理层

| 概念 | 说明 | 关联内容 |
|-----|------|---------|
| ORM框架 | 对象关系映射，简化数据库操作 | SQLAlchemy、数据库 |
| 数据模型 | DO/VO/Query三种模型 | 类型系统、参数验证 |
| 参数验证 | 确保输入数据的正确性 | Pydantic、类型系统 |
| 数据库 | 数据持久化存储 | ORM、数据访问层 |

### 接口设计层

| 概念 | 说明 | 关联内容 |
|-----|------|---------|
| 路由设计 | URL到处理函数的映射 | HTTP协议、控制器 |
| 控制器 | 处理HTTP请求的入口 | 参数验证、服务层 |
| 服务层 | 业务逻辑处理 | 数据访问层、异步编程 |
| 数据访问层 | 数据库操作的抽象 | ORM、数据库 |

### 质量属性层

| 概念 | 说明 | 关联内容 |
|-----|------|---------|
| 安全性 | 保护系统和数据安全 | 认证授权、输入验证 |
| 性能 | 系统响应速度和吞吐量 | 异步编程、缓存 |
| 可维护性 | 代码易于理解和修改 | 代码组织、命名规范 |

## 关联类型

| 类型 | 说明 | 示例 |
|-----|------|------|
| 依赖关系 | A依赖于B才能工作 | 控制器→路由设计、ORM→数据库 |
| 组合关系 | A包含B作为组成部分 | 分层架构→接口层/业务层/数据层 |
| 增强关系 | A增强B的功能 | 异步编程→服务层性能、缓存→DAO性能 |
| 转换关系 | 数据在概念间流转 | 请求参数→Query Model→DO→数据库 |

## 学习建议

**学习顺序**：基础概念层（HTTP/Python/类型系统）→ 数据处理层（DO/VO/Query/ORM/验证）→ 接口设计层（路由/Controller/Service/DAO）→ 质量属性层（安全/性能/可维护性）

**关键理解**：
- 路由依赖HTTP协议
- 控制器使用参数验证和服务层
- 数据模型与ORM和类型系统的关系
- 追踪HTTP请求的完整处理流程
- 观察数据在各层之间的转换过程
