这个 bug 的核心是**路由路径匹配冲突导致的参数解析错误**，具体表现和原因如下：


### **问题现象**
调用批量删除文件接口时（`DELETE /system/file/batch`），系统返回错误：  
`Input should be a valid integer, unable to parse string as an integer`，提示无法将字符串 "batch" 解析为整数。


### **根本原因**
1. **路由定义冲突**：  
   单个文件删除接口路径为 `/system/file/{file_id}`（`file_id` 期望整数），批量删除接口路径为 `/system/file/batch`。  
   FastAPI 路由匹配时，可能将 `/batch` 中的 "batch" 误识别为 `{file_id}` 的路径参数，试图将其转换为整数，导致类型解析失败。

2. **路由匹配优先级问题**：  
   若批量删除接口定义在单个删除接口之后，框架可能先匹配到 `/system/file/{file_id}`，而非预期的 `/system/file/batch`，加剧了冲突。


### **解决方案总结**
1. **调整路由顺序**：将批量删除接口（`/batch`）定义在单个删除接口（`/{file_id}`）之前，让框架优先匹配明确的批量路径。  
2. **路径前缀区分**：给批量接口添加独立前缀（如 `/batch/delete`），从语义上彻底避免冲突。  
3. **正则约束参数**：给 `file_id` 增加正则验证（`regex=r'^\d+$'`），限制仅数字能匹配单个删除接口。  
4. **查询参数替代**：批量删除改用查询参数（如 `/delete?file_ids=1,2,3`），与路径参数完全区分。


### **最终效果**
通过上述方案，可确保：  
- 单个删除接口（`/system/file/1`）正确接收整数 `file_id`；  
- 批量删除接口（`/system/file/batch` 或其他批量路径）被正确识别，不再触发整数解析错误。