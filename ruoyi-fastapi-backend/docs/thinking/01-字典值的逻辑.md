### 接口逻辑顺序
controller -> service -> dao -> entity -> db

### 字典值
字典值使用频率高，常用来翻译一些字段的值所以使用redis 缓存，这样查询速度快
在项目启动前需要启动redis,在项目初始化时建立redis连接，将数据库中的字段值全部存储到redis中
当新增修改字典值时也需要第一时间更新数据库，commit 数据库操作，flush 刷新后，将新的字典字段值存储到redis 中
修改数据库 -> 刷新数据库 -> 刷新redis -> 更新接口

### 权限
若依中权限控制放在sys_menu 表中，sys_menu 表中的menu_type 字段有 3 种类型，C 表示菜单，F 表示按钮，D 表示目录
其中使用 F 标识按钮权限，从按钮中控制接口权限
这样权限控制都集中在sys_menu 表中，方便管理，进行角色管理时，修改菜单权限时就能同时控制菜单权限以及按钮权限（接口权限）
perms 字段存储接口权限，在接口中进行权限控制，若权限字段为空，则表示不需要权限控制，例如目录菜单不需要权限控制
集中在一张表里也方便了管理

### 接口操作
get 用于查询，post 用于新增，put 用于修改，delete 用于删除
一般get 用于查询，一般查询数据不需要进行日志处理，但是可以定义响应类型，设置权限检查，校验是否有查询权限
post 用于新增，新增数据需要进行日志处理，并且需要定义权限检查，校验是否有新增权限
put 用于修改，修改数据需要进行日志处理，并且需要定义权限检查，校验是否有修改权限
delete 用于删除，删除数据需要进行日志处理，并且需要定义权限检查，校验是否有删除权限

### 分页逻辑
先构建带查询筛选的sql查询语句，再将这个段sql 交给分页工具函数执行并进行分页处理，返回分页后的数据
先过滤，再分页，返回结果
构建sql -> 筛选 -> 分页(执行sql db.execute) -> 返回结果

### 字段校验
定义装饰器函数，添加validate_model，在传参时定义 validate_model 对应的类型定义
交给pydantic 进行字段校验

### 日志
敏感操作，增删改操作一般添加日志，定义日志名称，日志类型
日志装饰器是自己定义的

### 字典类型操作
**新增**
校验参数 -> 添加修改时间/操作人 -> 校验是否重复 -> 添加字典类型 -> 刷新数据库 -> 更新redis -> 返回操作成功
**编辑**
参数校验 
-> 添加修改时间/操作人 
-> 取出显示修改的字段 
-> 校验 dict_type 是唯一 
-> 若修改了 dict_type，需要“级联”更新其下所有字典数据的 dict_type 字段，保证引用一致 
-> 刷新redis -> 返回操作成功
model_dump() 是一个核心方法，用于将 Pydantic 模型实例转换为Python 字典（dict）

**为什么修改了 dict_type，需要重建缓存**
因为缓存键中包含了 dict_type，所以修改了 dict_type，缓存键也需要更新，否则会出现缓存不一致的问题。
修改时需要传入缓存id，因为id 唯一，所以能准确查询到对应的缓存键，对这个键进行修改
因为id 唯一，所以修改缓存键 dict_type 时也只是修改的目标值，所以修改后新建缓存键，同时删除旧缓存键


### 删除字典值
删除字典值时需要级联删除字典值，当字典值被引用时，不能删除




### 目前已经看了的模块
1. 项目初始化
2. 登录模块
3. 字典模块


